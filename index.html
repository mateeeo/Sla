<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Handball VR - A-Frame 1.7.1</title>
    <!-- Bibliotecas Versão 1.7.1 -->
    <script src="https://aframe.io/releases/1.7.1/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net"></script>
    <script src="https://unpkg.com"></script>

    <script>
      let goals = 0;
      AFRAME.registerComponent('goal-logic', {
        init: function () {
          this.el.addEventListener('collidestart', (e) => {
            if (e.detail.target.el.id === 'ball') {
              goals++;
              document.querySelector('#score').setAttribute('value', 'SCORE: ' + goals);
              
              // Efeito visual e reset
              const ball = e.detail.target.el;
              setTimeout(() => {
                ball.setAttribute('position', '0 1.5 -1.5');
                if (ball.body) {
                  ball.body.velocity.set(0, 0, 0);
                  ball.body.angularVelocity.set(0, 0, 0);
                }
              }, 100);
            }
          });
        }
      });
    </script>
  </head>
  <body>
    <a-scene physics="debug: false; gravity: -9.8">
      
      <!-- Placar Moderno -->
      <a-text id="score" value="SCORE: 0" position="0 3.5 -4" 
              align="center" color="#00FF00" font="mozillavr"></a-text>

      <!-- Ambiente Pavilhão -->
      <a-sky color="#111"></a-sky>
      <a-plane static-body rotation="-90 0 0" width="20" height="20" color="#222"></a-plane>
      <a-grid></a-grid>

      <!-- Bola -->
      <a-sphere id="ball" dynamic-body="mass: 0.5" 
                grabbable
                position="0 1.5 -1" radius="0.12" color="orange">
      </a-sphere>

      <!-- Baliza -->
      
        <a-box static-body position="-1.5 1 0" width="0.1" height="2" depth="0.1" color="white"></a-box>
        <a-box static-body position="1.5 1 0" width="0.1" height="2" depth="0.1" color="white"></a-box>
        <a-box static-body position="0 2 0" width="3.1" height="0.1" depth="0.1" color="white"></a-box>
        <!-- Área de Golo -->
        <a-box goal-logic static-body="shape: box" 
               position="0 1 -0.1" width="2.8" height="1.8" depth="0.1" 
               visible="false"></a-box>
      

      <!-- Setup de Interação (Mãos e Rato) -->
      
        
      

      
      

    </a-scene>
  </body>
</html>
