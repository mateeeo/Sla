<!DOCTYPE html>
<html>
  <head>
    <title>Handball VR - A-Frame</title>
    <!-- Bibliotecas Necessárias -->
    <script src="https://aframe.io"></script>
    <script src="https://cdn.jsdelivr.net"></script>
    <script src="https://unpkg.com@^3.0.2/dist/aframe-super-hands.min.js"></script>
    <script src="https://unpkg.com@^4.1.1/dist/aframe-event-set-component.min.js"></script>

    <script>
      // Lógica para detetar quando a bola entra na baliza
      AFRAME.registerComponent('goal-sensor', {
        init: function () {
          this.el.addEventListener('collidestart', (e) => {
            if (e.detail.target.el.id === 'ball') {
              alert("GOLO!");
              // Reposiciona a bola no centro após o golo
              const ball = e.detail.target.el;
              ball.setAttribute('position', '0 1.5 -2');
              ball.body.velocity.set(0, 0, 0);
              ball.body.angularVelocity.set(0, 0, 0);
            }
          });
        }
      });
    </script>
  </head>
  <body>
    <a-scene physics="debug: false; gravity: -9.8">
      
      <!-- Iluminação e Céu -->
      <a-sky color="#87CEEB"></a-sky>
      <a-light type="ambient" intensity="0.5"></a-light>
      <a-light type="directional" position="1 4 3" intensity="0.8"></a-light>

      <!-- Chão (Pavilhão) -->
      <a-plane static-body rotation="-90 0 0" width="20" height="40" color="#3a5a40"></a-plane>

      <!-- A Bola -->
      <a-sphere id="ball" dynamic-body="mass: 0.5" 
                grabbable 
                position="0 1.5 -2" radius="0.15" color="orange"
                shadow="cast: true">
      </a-sphere>

      <!-- Baliza -->
      
        <!-- Postes e Barra (Obstáculos físicos) -->
        <a-box static-body position="-1.5 1 0" width="0.1" height="2" depth="0.1" color="white"></a-box>
        <a-box static-body position="1.5 1 0" width="0.1" height="2" depth="0.1" color="white"></a-box>
        <a-box static-body position="0 2 0" width="3.1" height="0.1" depth="0.1" color="white"></a-box>
        
        <!-- Sensor de Golo (Invisível, dentro da baliza) -->
        <a-box id="sensor" goal-sensor
               static-body="shape: box; sphereRadius: NaN"
               position="0 1 -0.5" width="2.8" height="1.8" depth="0.5" 
               visible="false">
        </a-box>
      

      <!-- Controladores para VR (Mãos) -->
      
      

      <!-- Câmara para Desktop (Permite arrastar a bola com o rato) -->
      
        
      

    </a-scene>
  </body>
</html>
