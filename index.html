<html>
  <head>
    <!-- Usando a versão 1.7.1 que indicaste -->
    <script src="https://aframe.io/releases/1.7.1/aframe.min.js"></script>
    <!-- Sistema de física para a bola bater nos postes -->
    <script src="https://cdn.jsdelivr.net"></script>
  </head>
  <body>
    <!-- 'shooter' é o nosso script personalizado que deteta o stick bluetooth -->
    <a-scene physics="gravity: -9.8" shooter>
      
      <!-- O CHÃO DO CAMPO -->
      <a-plane static-body position="0 0 -4" rotation="-90 0 0" width="20" height="20" color="#7BC8A4"></a-plane>
      
      <!-- A BALIZA (Feita com cilindros e caixas como no teu exemplo) -->
      
        <a-cylinder static-body position="-1.5 1 0" radius="0.05" height="2" color="#FFC65D"></a-cylinder>
        <a-cylinder static-body position="1.5 1 0" radius="0.05" height="2" color="#FFC65D"></a-cylinder>
        <a-box static-body position="0 2 0" width="3" height="0.1" depth="0.1" color="#FFC65D"></a-box>
      

      <!-- O CÉU -->
      <a-sky color="#ECECEC"></a-sky>

      <!-- CÂMARA COM MIRA (Onde o stick vai "clicar") -->
      
        
        
      
    </a-scene>

    <script>
      // Lógica para o Stick Bluetooth / Teclado / Clique
      AFRAME.registerComponent('shooter', {
        init: function () {
          const disparar = () => {
            const cam = document.querySelector('[camera]');
            const bola = document.createElement('a-sphere');
            
            bola.setAttribute('radius', '0.15');
            bola.setAttribute('color', '#4CC3D9');
            bola.setAttribute('dynamic-body', 'mass: 1');
            
            const pos = cam.getAttribute('position');
            bola.setAttribute('position', `${pos.x} ${pos.y} ${pos.z - 0.5}`);

            // Direção baseada na rotação da câmara (Giroscópio)
            const direction = new THREE.Vector3(0, 0, -1);
            direction.applyQuaternion(cam.object3D.quaternion);
            direction.multiplyScalar(15); 

            document.querySelector('a-scene').appendChild(bola);

            bola.addEventListener('body-loaded', () => {
              const p = bola.body.position;
              bola.body.applyImpulse(new CANNON.Vec3(direction.x, direction.y + 2, direction.z), new CANNON.Vec3(p.x, p.y, p.z));
            });
          };

          // Deteta qualquer tecla (Stick Selfie) ou clique no ecrã
          window.addEventListener('keydown', disparar);
          window.addEventListener('click', disparar);
        }
      });
    </script>
  </body>
</html>
